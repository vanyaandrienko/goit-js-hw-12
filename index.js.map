{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = \"47359148-e6bdc7b546b5534c01c17ed5e\";\nconst BASE_URL = \"https://pixabay.com/api/\";\n\n/**\n \n * @param {string} query \n * @param {number} page \n * @param {number} perPage \n * @returns {Promise<Object>} \n */\nexport async function fetchImages(query, page = 1, perPage = 15) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        page,\n        per_page: perPage,\n      },\n    });\n\n    return response.data; \n  } catch (error) {\n    console.error(\"Помилка при отриманні зображень:\", error);\n    throw error; \n  }\n}","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.getElementById(\"gallery\");\nconst loader = document.getElementById(\"loader\");\nlet lightbox = null;\n\n\nexport function clearGallery() {\n  gallery.innerHTML = \"\";\n}\n\n/**\n \n * @param {boolean} show \n */\nexport function toggleLoader(show) {\n  loader.hidden = !show;\n}\n\n/**\n .\n * @param {boolean} show \n */\nexport function toggleLoadMoreButton(show) {\n  document.getElementById(\"load-more\").hidden = !show;\n}\n\n/**\n \n * @param {string} type \n * @param {string} title\n * @param {string} message \n */\nexport function showMessage(type, title, message) {\n  iziToast[type]({\n    title,\n    message,\n  });\n}\n\n/**\n \n * @param {Array} images \n */\nexport function renderGallery(images) {\n  const markup = images\n    .map(\n      ({ webformatURL, largeImageURL, tags, likes, views, comments, downloads }) => `\n      <a href=\"${largeImageURL}\" class=\"gallery-item\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" loading=\"lazy\" />\n        <div class=\"info\">\n          <p><b>Likes:</b> ${likes}</p>\n          <p><b>Views:</b> ${views}</p>\n          <p><b>Comments:</b> ${comments}</p>\n          <p><b>Downloads:</b> ${downloads}</p>\n        </div>\n      </a>\n    `\n    )\n    .join(\"\");\n\n  gallery.insertAdjacentHTML(\"beforeend\", markup);\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox(\".gallery a\");\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from \"./js/pixabay-api.js\";\nimport {\n  clearGallery,\n  toggleLoader,\n  toggleLoadMoreButton,\n  showMessage,\n  renderGallery,\n} from \"./js/render-functions.js\";\n\nconst searchForm = document.getElementById(\"search-form\");\nconst loadMoreBtn = document.getElementById(\"load-more\");\n\nlet currentPage = 1;\nlet searchQuery = \"\";\nconst IMAGES_PER_PAGE = 15;\n\n\nsearchForm.addEventListener(\"submit\", onSearch);\nloadMoreBtn.addEventListener(\"click\", onLoadMore);\n\n/**\n \n * @param {Event} event \n */\nasync function onSearch(event) {\n  event.preventDefault();\n\n  searchQuery = searchForm.elements.query.value.trim();\n  if (!searchQuery) {\n    showMessage(\"warning\", \"Warning\", \"Please enter a search term.\");\n    return;\n  }\n\n  currentPage = 1;\n  clearGallery();\n  toggleLoader(true);\n  toggleLoadMoreButton(false);\n\n  try {\n    const response = await fetchImages(searchQuery, currentPage, IMAGES_PER_PAGE);\n\n    \n    if (!response || !Array.isArray(response.hits)) {\n      showMessage(\"error\", \"Error\", \"Invalid API response. Please try again.\");\n      return;\n    }\n\n    const images = response.hits;\n\n    if (images.length === 0) {\n      showMessage(\"info\", \"Info\", \"Sorry, no images found.\");\n      return;\n    }\n\n    renderGallery(images);\n    showMessage(\"success\", \"Success\", `Found ${response.totalHits} images.`);\n\n    if (response.totalHits > IMAGES_PER_PAGE) {\n      toggleLoadMoreButton(true);\n    }\n  } catch (error) {\n    showMessage(\"error\", \"Error\", \"Failed to load images. Try again later.\");\n  } finally {\n    toggleLoader(false);\n  }\n}\n\n\nasync function onLoadMore() {\n  currentPage += 1;\n  toggleLoader(true);\n\n  try {\n    const response = await fetchImages(searchQuery, currentPage, IMAGES_PER_PAGE);\n\n    \n    if (!response || !Array.isArray(response.hits)) {\n      showMessage(\"error\", \"Error\", \"Invalid API response. Please try again.\");\n      return;\n    }\n\n    const images = response.hits;\n    renderGallery(images);\n\n    const totalPages = Math.ceil(response.totalHits / IMAGES_PER_PAGE);\n    if (currentPage >= totalPages) {\n      toggleLoadMoreButton(false);\n      showMessage(\"info\", \"Info\", \"We're sorry, but you've reached the end of search results.\");\n    }\n\n    smoothScroll();\n  } catch (error) {\n    showMessage(\"error\", \"Error\", \"Failed to load images. Try again later.\");\n  } finally {\n    toggleLoader(false);\n  }\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document.querySelector(\".gallery-item\").getBoundingClientRect();\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: \"smooth\",\n  });\n}"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","axios","error","gallery","loader","lightbox","clearGallery","toggleLoader","show","toggleLoadMoreButton","showMessage","type","title","message","iziToast","renderGallery","images","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","searchForm","loadMoreBtn","currentPage","searchQuery","IMAGES_PER_PAGE","onSearch","onLoadMore","event","response","totalPages","smoothScroll","cardHeight"],"mappings":"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"}